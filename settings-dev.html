
<!doctype html5>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Settings</title>
<link href="/favicon.ico" rel="icon" />
<link href="//cdn.jsdelivr.net/foundation/4.0.2/css/foundation.css" rel="stylesheet" />
<link href="base.css" rel="stylesheet" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<!--
<script src="//cdn.jsdelivr.net/foundation/4.0.2/js/vendor/custom.modernizr.js"></script>
<script src="//cdn.jsdelivr.net/foundation/4.0.2/js/foundation.min.js"></script>
-->
<script src="//cdn.jsdelivr.net/sugar/1.3.9/sugar.min.js"></script>
</head>
<body>

  <div class="row">
    <div class="small-12 columns">
      <h2>Settings</h2>
    </div>
  </div>
  <section>
    <div class="row">
      <div class="small-12 columns">
        <label for="nowl"><h2>Watch Text</h2></label>
        <input type="text" id="now" autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Enter your own text" />
        
        <label for="timeout"><h2>Display Time Timeout</h2></label>
        <input type="text" id="timeout" autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="4000 (miliseconds)" />
        
        <label for="timeformat"><h2>Time Format</h2></label>
        <input type="text" id="timeformat" autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Just type 12h / 24h" />
        <ul class="action">
          <li><a id="save-button" class="next">Save</a></li>
        </ul>
      </div>
    </div>
  </section>

<script>
$(function() {
  var setOptions = function() {
    var options = window.location.hash;
    if (!options) {
      return {};
    }
    var options = JSON.parse(decodeURIComponent(options.substr(1)));
    if (!options) {
      return {};
    }
    $('#now').val(options.now ? options.now : 'NOW');
    $('#timeout').val(options.timeout ? options.timeout : '4000');
    $('#timeformat').val(options.timeformat ? options.timeformat : '24h');
    return options;
  };

  var getOptions = function() {
    var options = {};
    options.now = $('#now').val();
    options.timeout = $('#timeout').val();
    options.timeformat = $('#timeformat').val();
    return options;
  };

  $('#save-button').on('click', function() {
    document.location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(getOptions()));
    console.log(document.location);
  });

  setOptions();
});
</script>
</body>
</html>
